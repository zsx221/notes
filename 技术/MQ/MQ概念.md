    MQ概述
    小结
    ●MQ, 消息队列，存储消息的中间件
    ●分布式系统通信两种方式: 直接远程调用和借助第三方完成间接通信
    ●发送方称为生产者, 接收方称为消费者
    
    1.2 MQ的优势和劣势
    优势:
    ●应用解耦
    ●削峰填谷
    ●异步提速
      
    劣势:
    ●系统复杂度提高       因为引入了mq，整个系统的复杂性就提高了，需要考虑的问题变多了
    ●系统可用性降低        引入mq，如果mq出问题，或者宕机，系统同样会发生问题
    ●一致性问题          引入mq，一个请求过来，如果四个系统去执行并一起返回结果，三个系统都执行完成了，但是剩下一个系统由于某种原因没有执行完成，导致返回的结果是成功的，但实际上没有成功
    
    1.3 kafka、activemq、rabbitmq、rocketmq都有什么优点和缺点？
        activemq: 吞吐量万级 非常成熟，功能强犬，在业内大量的公司以及项目中都有应用偶尔会有较低概率丢失消息，
            而且现在社区以及国内应用都越来越少，官方社区现在地ActiveMQ 5.x 维护越来越少，而且确实主要是基于解耦和异步来用的，较少在大规模吞吐的场景中使用  
        rabbitmq：吞吐量万级  erlang 语言开发，性能极其好而且开源提供的管理界面非常棒，用起来很好用，在国内一些互联网公司近几年用rabbitmq也比较多一些
                    但是问题也是显而易见的，RabbitMQ 确实香吐量会低一些，这是因为他做的实现机制比较重。而且erlang 开发，国内没有几个公司有实力做erlang源，会有几率丢失消息
        rocketmq：吞吐量十万级 接口简单易用，而且毕竟在阿里大规模应用过，有阿里品牌保障
                    日处理消息上百亿之多，可以做到大规模香吐性能也非常好分布式扩展也很方便，社区维扩还可以，可靠性和可用性都是ok 的，还可以支撑大规模的topic数量，支持复杂MQ业务场景
        kafka：   吞吐量十万级 特点其实很明显，就是仅仅提供较少的核心功能，但是提供超高的香吐量，ms 级的延迟，极高的可用性以及可靠性，而且分布式可以任意扩展
                同时 kafka 最好是支撑较少的topic 数量即可，保证其超高香吐量，而且 kafka 唯的一点劣势是有可能消息重复消费
        问题小结：activemq不推荐使用，中小型公司建议使用rabbitmq，大型公司建议使用rocketmq，大数据领域使用kafka。
    1.4 引入消息队列之后该如何保证其高可用性？
        rabbitmq：(主从副本)
            1）单体模式
            2）普通集群模式：创建一个队列，只会在一个实例里面存在其实际数据，其他实例中存在的是元数据(元数据指的是队列的配置信息，标识了实际数据的位置)，
                如果消费者连接到其他实例时，此实例需要从那个实例拉取实际数据。
                （缺点1:可能会在rabbitmq集群内部产生大量的数据传输(由于队列只存在于一个实例内)    缺点2:可用性几乎没有什么保障，如果queue所在的节点岩机了，就导致那个queue的数据就丢失了，你就没法消费了）
            3)镜像集群模式：每个实例都会同步队列。拥有队列的元数据和实际数据，无论消费者到哪一个实例，都能消费队列里面的消息。
                (怎么开启，rabbit的管理控制台，新增一个策略，可以指定数据同步到所有节点，也可以同步到指定节点)
                缺点：一，这个性能开销也太大了吧，消息同步所有机器，导致网络带宽压力和消耗很重!
                    第二!这么玩儿，就没有扩展性可言了，如果某个 queue 负载很重，你加机器，新增的机器也包含了这个 queue 的所有数据，并没有办法线性扩展你的 queue
        
        kafka：(分布式  ) ![kafka的高可用设计](技术/MQ/kafka的高可用设计.png "kafka的高可用设计")
                            
    小结
    既然MQ有优势也有劣势，那么使用MQ需要满足什么条件呢?
    ①生产者不需要从消费者处获得反馈。引入消息队列之前的直接调用,其接口的返回值应该为空,这才让明
    明下层的动作还没做，上层却当成动作做完了继续往后走，即所谓异步成为了可能。
    ②容许短暂的不一致性。
    ③确实是用了有效果。即解耦、提速、削峰这些方面的收益,超过加入MQ,管理MQ这些成本。

