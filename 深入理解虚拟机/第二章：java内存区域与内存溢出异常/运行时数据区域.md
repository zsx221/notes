java虚拟机内存模型
1、虚拟机内存运行时数据区域
    运行时数据区域大致分为方法区、堆、虚拟机栈、本地方法栈、程序计数器
  1.1 程序计数器
      当前线程所执行的字节码的行号指示器，程序控制流的指示器、分支、循环、跳转、异常处理、线程回复等基础功能都需要依赖这个计数器来完成。
      当遇到多线程的情况时，运行时，都是线程之间的切换来进行的，因为一个处理器同一时间只会执行一个线程的指令，这个时候就需要程序计数器来进行记录原来的线程的位置，而且每个线程都
      需要一个程序计数器，每个线程之间是互不影响的，所以线程之间的程序计数器也是互不影响的，程序计数器是线程私有的.
      
  1.2 java虚拟机栈
      java虚拟机的生命周期跟线程是一样的，虚拟机也是线程私有的。java虚拟机栈描述的是java方法执行的线程内存模型：每个方法被执行的时候，java虚拟机都会同步创建一个栈帧，用来存储局部
      变量表（就是我们常听到的栈）、操作数栈、动态连接、方法出口等信息。
      局部变量表里面储存着：基本数据类型、对象的引用.
      
  1.3 本地方法栈
      作用同java虚拟机栈，只不过java虚拟机栈是在java方法时服务的，而本地方法栈是为本地方法服务的。也是本地方法栈。生命周期：同线程一致。
    
  1.4 java堆 
      java堆是虚拟机运行时最大的一块内存，唯一的作用就是储存运行时创建的对象和数组。生命周期：同线程一致。
      Java堆也是垃圾收集器管理的内存区域，是线程共享的。
      
  1.5 方法区
      作用：储存虚拟机加载的类型信息，常量、静态变量、编译器编译之后的代码缓存等数据。
      在虚拟机规范中，方法区是属于堆的一部分，但是却有一个别名：none heap，目的是与java堆分开来。它是线程共享的内存区域。
      jdk8之前，很多人喜欢使用HotSpot，而在jdk8时，方法区被称为永久代
      在jdk6的时候，Hotspot开发团队就放弃永久代，逐步改为采用放弃永久代，逐步改为采用本地内存实现方法区了。到了jdk7的hotspot，已经把原本放在永久代的字符串常量池、静态变量等移到
      Java堆。到了jdk8的时候，Hotspot就正式放弃了永久代，使用元空间来储存永久代剩余储存的东西。
      永久代和元空间最大的区别：元空间使用的是本地内存，而永久代使用的是jvm内存。
      
  1.6 常量池
      常量池是方法区的一部分，储存着class文件中的字符，或者是string创建的字符串常量。
  
  1.7 直接内存
      直接内存并不是java虚拟机内存模型的一部分，但是这部分也比较重要，在jdk1.4中新加入了NIO类，引入了一种基于通道与缓冲区的I/O方法，它可以基于Native数据库直接分配堆外内存，让通过
      java堆里面的一个DirectByteBuffer对象作为这块内存的引用进行操作。
